"use strict";(self.webpackChunkaquarium_corals=self.webpackChunkaquarium_corals||[]).push([[718],{5718:(_,d,l)=>{l.r(d),l.d(d,{AuthModule:()=>T});var p=l(6895),a=l(2510),e=l(4650);let h=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-auth"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[a.lC]}),i})();var c=l(377),m=l(7579),u=l(2722),b=l(2340),g=l(6642),f=l(384),s=l(4006);let x=(()=>{class i{constructor(t,n,r){this.socialAuthService=t,this._authService=n,this._router=r,this._unsubscribeAll=new m.x,this.environmentCondition=b.N.production}ngOnInit(){this.socialAuthService.authState.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.id&&this.userLogin(t)})}userLogin(t){let n=new c.zO;n.IdToken=t.idToken,this._authService.AuthenticateUser(n).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{r.memberId&&(this._authService.loggedInUser.next(r),this._authService.storeAccessTokenToLocalStorage(r.accessToken),setTimeout(()=>{this._router.navigate(["./user"])},1e3))},r=>{})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.xE),e.Y36(f.e),e.Y36(a.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sign-in"]],decls:26,vars:1,consts:[[1,"h-100"],[1,"h-100","d-flex","flex-column","flex-lg-row","flex-column-fluid"],[1,"d-flex","flex-column","flex-lg-row-fluid","w-lg-50","p-10","order-2","order-lg-1"],[1,"d-flex","flex-center","flex-column","flex-lg-row-fluid"],[1,"w-lg-500px","p-10"],["novalidate","novalidate","id","kt_sign_up_form",1,"form","w-100"],[1,"text-center","mb-11"],[1,"text-dark","fw-bolder","mb-3"],[1,"text-gray-500","fw-semibold","fs-6"],[1,"row","g-3","mb-9","d-flex","justify-content-center"],["type","standard","size","large","logo_alignment","center"],[1,"text-gray-500","text-center","fw-semibold","fs-6"],[1,"link-primary","fw-semibold",3,"routerLink"],[1,"d-flex","flex-lg-row-fluid","w-lg-50","bgi-size-cover","bgi-position-center","order-1","order-lg-2",2,"background-image","url(assets/images/coral-reef-aquarium-scaled-1.jpg)"],[1,"d-flex","flex-column","flex-center","py-7","py-lg-15","px-5","px-md-15","w-100","bg-big-img"],["href","#",1,"mb-lg-12"],["alt","Logo","src","./../../../assets/images/logo-no-background.svg",1,"h-60px","h-lg-75px"],[1,"d-none","d-lg-block","text-white","fs-2qx","fw-bolder","text-center","mb-7"],[1,"d-none","d-lg-block","text-white","fs-base","text-center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5)(7,"div",6)(8,"h1",7),e._uU(9,"Sign In"),e.qZA(),e.TgZ(10,"div",8),e._uU(11,"Aquatraders Community"),e.qZA()(),e.TgZ(12,"div",9),e._UZ(13,"asl-google-signin-button",10),e.qZA(),e.TgZ(14,"div",11),e._uU(15," You don`t have an account? "),e.TgZ(16,"a",12),e._uU(17,"Sign up"),e.qZA()()()()()(),e.TgZ(18,"div",13)(19,"div",14)(20,"a",15),e._UZ(21,"img",16),e.qZA(),e.TgZ(22,"h1",17),e._uU(23,"Connecting the aquarist community"),e.qZA(),e.TgZ(24,"div",18),e._uU(25,"Aquatraders is the best place to buy, sell and swap corals and other products with fellow hobbyists. "),e.qZA()()()()()()),2&t&&(e.xp6(16),e.Q6J("routerLink","/auth/sign-up"))},dependencies:[a.yS,g.TI,s._Y,s.JL,s.F],styles:["[_nghost-%COMP%]  .nsm7Bb-HzV7m-LgbsSe{background-color:transparent;border:1px solid var(--kt-input-border-color)}.bg-big-img[_ngcontent-%COMP%]{background-color:#000c}asl-google-signin-button[_ngcontent-%COMP%]{justify-content:center;display:flex}"]}),i})();function v(i,o){1&i&&(e.TgZ(0,"div",19),e._uU(1,"Your Social Campaigns"),e.qZA())}function A(i,o){1&i&&(e.TgZ(0,"div",20),e._UZ(1,"asl-google-signin-button",21),e.qZA())}function y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"span",24),e._uU(3,"Your Details"),e.qZA()(),e.TgZ(4,"div",25),e._UZ(5,"input",26),e.qZA(),e.TgZ(6,"div",25),e._UZ(7,"input",27),e.qZA(),e.TgZ(8,"div",25)(9,"div",28)(10,"div",29),e._UZ(11,"input",30),e.qZA()()(),e.TgZ(12,"div",31)(13,"button",32),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submit())}),e._UZ(14,"span",33),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(13),e.Q6J("disabled",t.form.invalid),e.xp6(1),e.Q6J("innerHTML",t.signupLoadingMessage,e.oJD)}}const Z=[{path:"",component:h,children:[{path:"",redirectTo:"sign-up",pathMatch:"full"},{path:"sign-up",component:(()=>{class i{constructor(t,n,r,U){this.socialAuthService=t,this._authService=n,this._router=r,this._fb=U,this.signupLoadingMessage="Sign Up",this.googleSignupDetails=!1,this._unsubscribeAll=new m.x,this.signupDetails=new c.wo,this.initForm()}ngOnInit(){this.socialAuthService.authState.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.id&&this.userLogin(t)})}userLogin(t){let n=new c.zO;n.IdToken=t.idToken,this._authService.AuthenticateUser(n).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{r.memberId?(this.signupLoadingMessage="Existing users... <br> Redirecting to your profile...",this._authService.loggedInUser.next(r),setTimeout(()=>{this._router.navigate(["./user"])},1e3)):this.patchUserForm(t)},r=>{this.patchUserForm(t)})}patchUserForm(t){this.googleSignupDetails=!0,this.signupDetails.googleToken=t.id,this.signupDetails.email=t.email,this.signupDetails.photoUrl=t.photoUrl,this.form.patchValue({token:t.id,firstName:t.firstName,lastName:t.lastName})}submit(){this.signupLoadingMessage="Loading...",this.signupDetails.firstName=this.form.get("firstName").value,this.signupDetails.lastName=this.form.get("lastName").value,this.signupDetails.zipCode=this.form.get("zipCode").value,this._authService.userRegister(this.signupDetails).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.signupLoadingMessage="You are registered successfully! <br> Redirecting to login...",setTimeout(()=>{this._router.navigate(["./auth/sign-in"])},1e3)})}initForm(){this.form=this._fb.group({firstName:[null,s.kI.required],lastName:[null,s.kI.required],zipCode:[null,s.kI.required],token:[null,s.kI.required]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.xE),e.Y36(f.e),e.Y36(a.F0),e.Y36(s.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sign-up"]],decls:25,vars:5,consts:[[1,"h-100"],[1,"h-100","d-flex","flex-column","flex-lg-row","flex-column-fluid"],[1,"d-flex","flex-column","flex-lg-row-fluid","w-lg-50","p-10","order-2","order-lg-1"],[1,"d-flex","flex-center","flex-column","flex-lg-row-fluid"],[1,"w-lg-500px","p-10"],["novalidate","novalidate","id","kt_sign_up_form","action","#",1,"form","w-100",3,"formGroup"],[1,"text-center","mb-11"],[1,"text-dark","fw-bolder","mb-3"],["class","text-gray-500 fw-semibold fs-6",4,"ngIf"],["class","row g-3 mb-9",4,"ngIf"],["class","user-signup-details",4,"ngIf"],[1,"text-gray-500","text-center","fw-semibold","fs-6"],[1,"link-primary","fw-semibold",3,"routerLink"],[1,"d-flex","flex-lg-row-fluid","w-lg-50","bgi-size-cover","bgi-position-center","order-1","order-lg-2",2,"background-image","url(assets/images/coral-reef-aquarium-scaled-1.jpg)"],[1,"d-flex","flex-column","flex-center","py-7","py-lg-15","px-5","px-md-15","w-100","bg-big-img"],["href","#",1,"mb-lg-12"],["alt","Logo","src","./../../../assets/images/logo-no-background.svg",1,"h-60px","h-lg-75px"],[1,"d-none","d-lg-block","text-white","fs-2qx","fw-bolder","text-center","mb-7"],[1,"d-none","d-lg-block","text-white","fs-base","text-center"],[1,"text-gray-500","fw-semibold","fs-6"],[1,"row","g-3","mb-9"],["type","standard","size","large","text","signup_with","logo_alignment","center"],[1,"user-signup-details"],[1,"separator","separator-content","my-14"],[1,"w-125px","text-gray-500","fw-semibold","fs-7"],[1,"fv-row","mb-8"],["type","text","placeholder","Name","name","name","formControlName","firstName",1,"form-control","bg-transparent"],["type","text","placeholder","Name","name","name","formControlName","lastName",1,"form-control","bg-transparent"],[1,"mb-1"],[1,"position-relative","mb-3"],["type","text","placeholder","Postal code","formControlName","zipCode","name","zip_code",1,"form-control","bg-transparent"],[1,"d-grid","mb-10"],["type","submit","id","signUpSubmit",1,"btn","btn-primary",3,"disabled","click"],[1,"indicator-label",3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5)(7,"div",6)(8,"h1",7),e._uU(9,"Sign Up"),e.qZA(),e.YNc(10,v,2,0,"div",8),e.qZA(),e.YNc(11,A,2,0,"div",9),e.YNc(12,y,15,2,"div",10),e.TgZ(13,"div",11),e._uU(14," Already have an Account? "),e.TgZ(15,"a",12),e._uU(16,"Sign in"),e.qZA()()()()()(),e.TgZ(17,"div",13)(18,"div",14)(19,"a",15),e._UZ(20,"img",16),e.qZA(),e.TgZ(21,"h1",17),e._uU(22,"Connecting the aquarist community"),e.qZA(),e.TgZ(23,"div",18),e._uU(24,"Aquatraders is the best place to buy, sell and swap corals and other products with fellow hobbyists. "),e.qZA()()()()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("ngIf",!n.googleSignupDetails),e.xp6(1),e.Q6J("ngIf",!n.googleSignupDetails),e.xp6(1),e.Q6J("ngIf",n.googleSignupDetails),e.xp6(3),e.Q6J("routerLink","/auth/sign-in"))},dependencies:[p.O5,a.yS,g.TI,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:["[_nghost-%COMP%]  .nsm7Bb-HzV7m-LgbsSe{background-color:transparent;border:1px solid var(--kt-input-border-color)}.bg-big-img[_ngcontent-%COMP%]{background-color:#000c}asl-google-signin-button[_ngcontent-%COMP%]{justify-content:center;display:flex}"]}),i})()},{path:"sign-in",component:x}]},{path:"**",redirectTo:""}];let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[a.Bz.forChild(Z),a.Bz]}),i})();var S=l(8635);let T=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[w,p.ez,S.m]}),i})()}}]);