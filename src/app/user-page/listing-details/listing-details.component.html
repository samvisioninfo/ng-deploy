<div class="page d-flex flex-row flex-column-fluid">
    <!--begin::Wrapper-->
    <div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
        <div id="kt_content_container" class="d-flex flex-column-fluid align-items-start container-xxl">
            <div class="content flex-row-fluid" id="kt_content">
                <div class="d-flex flex-row justify-content-between p-5 mt-5">
                    <a class="mt-2 cursor-pointer" (click)="goBack()">
                        <span class="svg-icon svg-icon-2x svg-icon-gray-400">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect opacity="0.5" x="6" y="11" width="13" height="2" rx="1" fill="currentColor" />
                                <path d="M8.56569 11.4343L12.75 7.25C13.1642 6.83579 13.1642 6.16421 12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75L5.70711 11.2929C5.31658 11.6834 5.31658 12.3166 5.70711 12.7071L11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25C13.1642 17.8358 13.1642 17.1642 12.75 16.75L8.56569 12.5657C8.25327 12.2533 8.25327 11.7467 8.56569 11.4343Z" fill="currentColor" />
                            </svg>
                        </span>
                    </a>
                    <h1 class="text-center fs-1 m-0">Item Listing Details</h1>
                    <span></span>
                </div>
                <div class="d-flex row bg-white rounded p-5 m-5 flex-lg-row flex-column-reverse">
                    <div class="col d-flex" *ngIf="galleryImages">
                        <ngx-gallery [options]="galleryOptions" [images]="galleryImages" class="ngx-gallery">
                        </ngx-gallery>
                    </div>
                    <div class="col mx-auto d-flex flex-column">
                        <div class="row text-center">
                            <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-6 mb-3">
                                <div class="text-dark-900 fs-1">{{product.productName}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-sm-4 text-center p-0">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-0 me-sm-6 mb-3 d-flex flex-center">
                                    <span style="height: 40px; width: 1px; display: inline-block;"></span>
                                    <div class="text-400 fs-4">Price: <b><span class="item-price">${{product.price}}</span></b></div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-8 text-center p-0">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 mb-3">
                                    <div class="d-flex flex-stack">
                                        <div class="btn-group me-5 w-45px h-45px bgi-size-contain bgi-position-center bgi-no-repeat bgi-size-cover" *ngIf="product && product.member" style="background-image:url({{product.member.memberAvatar}})"></div>
                                        <div class="d-flex align-items-center flex-row-fluid flex-wrap">
                                            <div class="flex-grow-1 me-2">
                                                <a class="text-gray-800 fs-6 fw-bold" *ngIf="product && product.member">{{product.member.memberName}}</a>
                                                <span class="text-muted fw-semibold d-block fs-7" *ngIf="product && product.member">{{userRating}}★ ({{product.member.sold}})</span>
                                            </div>
                                            <a (click)="showDetails(product.memberId)" class="btn btn-sm btn-success fs-8 fw-bold mx-auto">View Profile</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row text-start" *ngIf="product.description">
                            <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-2 me-6 mb-3">
                                <div class="text-400 fs-4" [innerHTML]="product.description"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-sm-6 p-0">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-0 me-sm-6 mb-3">
                                    <div class="text-400 fs-4">Listed: <b>{{dateValueNew}}</b></div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 p-0" *ngIf="nameOfFrag">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 mb-3">
                                    <div class="text-400 fs-4 mouse-over" (mouseover)="getTextForTooltip(nameOfFrag)" data-bs-toggle="tooltip" data-bs-placement="top" [title]="tooltipText">Age of frag: <b>{{nameOfFrag}}</b></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-sm-6 p-0" *ngIf="product.flowIntensity">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-0 me-sm-6 mb-3">
                                    <div class="text-400 fs-4 d-flex flex-row justify-content-between">
                                        <span class="d-flex align-items-center">Flow:</span>
                                        <div *ngIf="flowLow" style="background-image:url('../../../assets/icons/flow_low.svg')" class="bgi-position-center bgi-no-repeat bgi-size-cover h-50px w-75 mouse-over d-inline-block" data-bs-toggle="tooltip" data-bs-placement="top" title="Low"></div>
                                        <div *ngIf="flowMed" style="background-image:url('../../../assets/icons/flow_med.svg')" class="bgi-position-center bgi-no-repeat bgi-size-cover h-50px w-75 mouse-over d-inline-block" data-bs-toggle="tooltip" data-bs-placement="top" title="Medium"></div>
                                        <div *ngIf="flowHigh" style="background-image:url('../../../assets/icons/flow_high.svg')" class="bgi-position-center bgi-no-repeat bgi-size-cover h-50px w-75 mouse-over d-inline-block" data-bs-toggle="tooltip" data-bs-placement="top" title="High"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 p-0" *ngIf="product.lightingIntensity">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 mb-3">
                                    <div class="text-400 fs-4 d-flex flex-row justify-content-between">
                                        <span class="d-flex align-items-center">Lighting:</span>
                                        <div *ngIf="lightLow" style="background-image:url('../../../assets/icons/light_low.svg')" class="bgi-position-center bgi-no-repeat bgi-size-cover h-50px w-75 mouse-over d-inline-block" data-bs-toggle="tooltip" data-bs-placement="top" title="Low: 30-75 PAR"></div>
                                        <div *ngIf="lightMed" style="background-image:url('../../../assets/icons/light_med.svg')" class="bgi-position-center bgi-no-repeat bgi-size-cover h-50px w-75 mouse-over d-inline-block" data-bs-toggle="tooltip" data-bs-placement="top" title="Med: 75-150 PAR"></div>
                                        <div *ngIf="lightHigh" style="background-image:url('../../../assets/icons/light_high.svg')" class="bgi-position-center bgi-no-repeat bgi-size-cover h-50px w-75 mouse-over d-inline-block" data-bs-toggle="tooltip" data-bs-placement="top" title="High: 150+ PAR"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 col-sm-4 p-0" *ngIf="product.alkalinity">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-6 mb-3">
                                    <div class="text-400 fs-5">Alkalinity: <b>{{product.alkalinity}}</b><span class="fs-9">dKH</span></div>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4 p-0" *ngIf="product.phosphate">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-0 me-sm-6 mb-3">
                                    <div class="text-400 fs-5">Phosphate: <b>{{product.phosphate}}</b><span class="fs-9">ppm</span></div>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4 p-0" *ngIf="product.nitrate">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-6 me-sm-0 mb-3">
                                    <div class="text-400 fs-5">Nitrate: <b>{{product.nitrate}}</b><span class="fs-9">ppm</span></div>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4 p-0" *ngIf="product.calcium">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-0 me-sm-6 mb-3">
                                    <div class="text-400 fs-5">Calcium: <b>{{product.calcium}}</b><span class="fs-9">ppm</span></div>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4 p-0" *ngIf="product.magnesium">
                                <div class="border border-gray-300 border-dashed rounded py-3 px-2 me-6 mb-3">
                                    <div class="text-400 fs-5">Magnesium: <b>{{product.magnesium}}</b><span class="fs-9">ppm</span></div>
                                </div>
                            </div>
                            <div class="col-4 p-0"> </div>
                            <div class="col-4 p-0"> </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="d-flex row m-5 mt-0 justify-content-end">
                    <button type="button" class="btn btn-success w-50" (click)="onViewRightPanel(product)" *ngIf="showContactBtn">Contact seller</button>
                </div> -->
                <!-- <div *ngIf="reviewsList.length === 0">
                    <h1 class="ms-5 fs-1">Sorry, no reviws for this product</h1>
                </div> -->
                <div *ngIf="reviewsList.length != 0">
                    <h1 class="ms-5 fs-1">Product Reviews</h1>
                    <div class="d-flex row bg-white m-5 p-5" *ngFor="let review of reviewsList">
                        <div class="d-flex align-items-center flex-grow-1 position-relative">
                            <div class="btn-group me-5 w-45px h-45px bgi-size-contain" style="background-image:url({{review.memberDetails.memberAvatar}})"></div>
                            <div class="d-flex flex-column">
                                <a [routerLink]="'/user/public-profile'" [queryParams]="{memberId: review.memberDetails.memberId}" class="text-gray-900 text-hover-primary fs-6 fw-bold">{{review.memberDetails.memberName}}</a>
                                <span class="text-gray-400 fw-bold position-absolute top-0 end-0">{{review.dateCreated | date: 'medium'}}</span>
                                <span class="text-gray-400 fs-2" *ngIf="review.ratingValue === 1">★☆☆☆☆</span>
                                <span class="text-gray-400 fs-2" *ngIf="review.ratingValue === 2">★★☆☆☆</span>
                                <span class="text-gray-400 fs-2" *ngIf="review.ratingValue === 3">★★★☆☆</span>
                                <span class="text-gray-400 fs-2" *ngIf="review.ratingValue === 4">★★★★☆</span>
                                <span class="text-gray-400 fs-2" *ngIf="review.ratingValue === 5">★★★★★</span>
                            </div>
                        </div>
                        <div class="mt-3">
                            <p class="text-400 fs-4 mb-0">{{review.feedbackMessage}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
